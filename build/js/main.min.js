"use strict";!function(){function e(e,t,n){e.addEventListener("load",function(){switch(e.status){case 200:t(e.response);break;case 400:n("Неверный запрос");break;case 401:n("Пользователь не авторизован");break;case 404:n("Ничего не найдено");break;default:n("Неизвестный статус: "+e.status+" "+e.statusText)}}),e.addEventListener("error",function(){n("Произошла ошибка соединения")}),e.addEventListener("timeout",function(){n("Запрос не успел выполниться за "+e.timeout+"мс")})}window.loadData=function(t,n,a){var o=new XMLHttpRequest;o.responseType="json",o.timeout=1e4,o.open("GET",a),e(o,t,n),o.send()}}(),function(){var e;window.setDelay=function(t){e&&clearTimeout(e),e=setTimeout(t,500)}}(),function(){var e=document.querySelector(".pagination__pages-list-wrapper");window.renderPagination=function(t,n){var a=Math.ceil(t/n);if(a<=1)e.innerHTML="";else{var o=document.createElement("ul"),r=document.createElement("li"),i=document.createElement("a");o.classList.add("pagination__pages-list"),r.classList.add("pagination__pages-item"),i.classList.add("pagination__pages-item-link");for(var s=0;s<a;s++){var c=i.cloneNode(),l=r.cloneNode();c.textContent=(s+1).toString(),l.appendChild(c),o.appendChild(l)}e.innerHTML="",e.appendChild(o),a>1&&e.querySelectorAll(".pagination__pages-item")[0].classList.add("pagination__pages-item--current")}}}(),function(){function e(e){s.textContent=e.length,window.tasks=e,t(l,c,!0)}function t(e,t,a,o){var r=document.createDocumentFragment();t=t<(f=o||window.tasks).length?t:f.length,u.innerHTML="",u.appendChild(d);for(var i=e;i<t;i++)r.appendChild(n(f[i]));u.appendChild(r),a&&window.renderPagination(f.length,t)}function n(e){var t=document.querySelector("#table-template").content.cloneNode(!0);return t.querySelector(".table__data--1").textContent="",t.querySelector(".table__data--2").textContent=e.tiket,t.querySelector(".table__data--3").textContent=e.name,t.querySelector(".table__data--4").textContent="",t.querySelector(".table__data--5").textContent=e.status,t.querySelector(".table__data--6").textContent=e.result,t.querySelector(".table__data--7").textContent=e.created,t.querySelector(".table__data--8").textContent=e.update,t.querySelector(".table__data--9").textContent=e.deadline,t.querySelector(".table__data--10").textContent="",t}function a(e,t){e.currentTarget.querySelector("."+t).classList.remove(t),e.target.classList.add(t)}function o(e,t){var n=!1;for(var a in e)if(-1!==e[a].toString().toLowerCase().indexOf(t)){n=!0;break}return n}function r(e){var n=e.target.value.toLowerCase(),a=window.tasks.filter(function(e){return o(e,n)});t(l,c,!0,a)}var i={ALL:"js/JSON/data.json",DEC:"js/JSON/december-tasks.json",NOV:"js/JSON/november-tasks.json"},s=document.querySelector(".tasks-table__sum-tasks"),c=20,l=0,u=document.querySelector("#table"),d=u.querySelector("tr"),_=document.querySelector(".pagination__sum-list"),m=document.querySelector(".pagination__pages-list-wrapper"),p=document.querySelector(".tasks-table__filter-date"),g=document.querySelector("#search"),f=[];window.loadData(e,console.log,i.ALL),p.addEventListener("change",function(t){g.value="";var n=document.querySelector(".pagination__sum-list");switch(n.querySelector(".pagination__sum-item--current").classList.remove("pagination__sum-item--current"),n.querySelector(".pagination__sum-item").classList.add("pagination__sum-item--current"),t.target.value){case"All":window.loadData(e,console.log,i.ALL);break;case"December":window.loadData(e,console.log,i.DEC);break;case"October":window.loadData(e,console.log,i.NOV)}}),_.addEventListener("click",function(e){if(e.preventDefault(),e.target.classList.contains("pagination__sum-item-link")){a(e,"pagination__sum-item--current");var n=parseInt(e.target.textContent,10);isNaN(n)?t(l,f.length,!0):t(l,n,!0)}}),m.addEventListener("click",function(e){if(e.preventDefault(),e.target.classList.contains("pagination__pages-item-link")){a(e,"pagination__pages-item--current");var n=document.querySelector(".pagination__sum-item--current").textContent,o=document.querySelector(".pagination__pages-item--current").textContent;t(n*(o-1),o*n,!1)}}),g.addEventListener("keyup",function(e){window.setDelay(function(){r(e)})})}();